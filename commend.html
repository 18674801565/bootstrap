<!DOCTYPE html>
    <html lang="zh-CN">
    
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
      <meta name="description" content="">
      <meta name="author" content="">
      <link rel="icon" href="../../favicon.ico">
    
      <title>Dashboard Template for Bootstrap</title>
    
      <!-- Bootstrap core CSS -->
      <link href="./css/bootstrap-3.3.7.min.css" rel="stylesheet">
    
      <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
      <link href="./assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">
    
      <!-- Custom styles for this template -->
      <link href="./css/dashboard.css" rel="stylesheet">
    
      <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
      <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
      <script src="./assets/js/ie-emulation-modes-warning.js"></script>
    
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!--[if lt IE 9]>
          <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
          <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
      <style>
        /* 导航 */
        .navbar-inverse {
          background-color: #348fde;
        }
    
        .navbar-inverse a {
          color: white !important;
        }
    
        .navbar-header:hover {
          background-color: #367FA9;
        }
    
        .navbar>.container-fluid .navbar-brand {
          margin-left: 0px;
    
        }
    
        /* 侧栏 */
        .side_top{
          height: 64px;
          width: 320px;
          margin-left: -20px;
          line-height: 64px;
          background-color: #1A2226;
          padding-left: 10px;
          margin-bottom: 2px;
        }
        .side_top .img-circle{
          height: 64px;
          width: 84px;
        }
        .side_top > .side_username{
          height: 40px;
          line-height: 40px;
          color: white;
        }
        .side_menus{
          display: block;
          width: 320px;
          margin-left: -20px;
          height: 40px;
          line-height: 40px;
          background-color: #1A2226;
          color: white;
          padding-left: 20px;
          font-size: 16px;
          margin-bottom: 2px;
        }
        .nav-sidebar>li>a:hover {
          text-decoration: none;
          background-color: #1A2226;
        }
    
        .sidebar a {
          color: white;
        }
        .active{
          padding-top: 0px;
          border-left: 2px solid #0285f7;
        }
        .sidebar span {
          margin-right: 10px;
        }
    
        .side_visited_ul {
          margin-left: 0px;
    
        }
    
        .side_visited_ul li a {
          padding-left: 30px;
        }
      </style>
    </head>
    
    <body>
    
      <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">BackStage</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="#">功能</a></li>
    
            </ul>
            <form class="navbar-form navbar-right">
              <input type="text" class="form-control" placeholder="Search...">
            </form>
          </div>
        </div>
      </nav>
    
      <div class="container-fluid">
        <div class="row">
            
          <div class="col-sm-3 col-md-2 sidebar">
              <div class="side_top">
                  <img src="./img/logo.png" alt="..." class="img-circle">
                  <span class="side_username">罗先生</span>
              </div>
              <span class="side_menus">MENUS</span>
            
            <ul class="nav nav-sidebar leftside_bar">
    
              <li class="side_visited"><a href=""> <span class="glyphicon glyphicon-user"></span>个人中心</a>
                <ul class="nav nav-sidebar side_visited_ul" style="display: none">
                    <li><a href="">修改密码</a></li>
                  
                 </ul>
              </li>
              <li class="side_visited"><a href=""> <span class="glyphicon glyphicon-expand"></span>视屏管理</a>
                <ul class="nav nav-sidebar side_visited_ul" style="display: none">
                    <li><a href="">添加视屏</a></li>
                    <li><a href="">删除视屏</a></li>
                    <li><a href="">修改视屏信息</a></li>
                  
                  </ul>
              </li>
              <li class="side_visited"><a href="javascript:void(0)"> <span
                    class="glyphicon glyphicon-headphones"></span>用户管理</a>
                <ul class="nav nav-sidebar side_visited_ul" style="display: none">
                  <li><a href="">添加用户</a></li>
                  <li><a href="">删除用户</a></li>
                  <li><a href="">修改用户</a></li>
                
                </ul>
              </li>
              <li class="side_visited"><a href="#"> <span class="glyphicon glyphicon-th-large"></span>角色管理</a>
                <ul class="nav nav-sidebar side_visited_ul" style="display: none">
                    <li><a href="">添加角色</a></li>
                    <li><a href="">删除删除</a></li>
                    <li><a href="">修改角色</a></li>
                  
                  </ul>
              </li>
              <li class="side_visited"><a href="#"><span class="glyphicon glyphicon-comment"></span>评论管理</a></li>
              <li class="side_visited"><a href="#"><span class="glyphicon glyphicon-shopping-cart"></span>积分管理</a></li>
            </ul>
          </div>
          <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <h1 class="page-header">功能</h1>
    
            <form action="javascript:;" class="form-horizontal" role="form">
                    <div class="form-group">
                        <label for="classify" class="col-sm-2 control-label">分类名:</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="classify" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="title" class="col-sm-2 control-label">标题:</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="title" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="keyword" class="col-sm-2 control-label">关键字:</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="keyword" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="cont" class="col-sm-2 control-label">内容描述:</label>
                        <div class="col-sm-8">
                            <script id="cont" name="content" type="text/plain" style="width: 100%;height: 600px;"></script>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="clickNum" class="col-sm-2 control-label">点击量:</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="clickNum" value="0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="sort" class="col-sm-2 control-label">排序:</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="sort" value="0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label"></label>
                        <div class="col-sm-8">
                            <button class="btn btn-info" id="submit">提交</button>
                        </div>
                    </div>
                </form>
            </div>
    
        
          </div>
        </div>
      </div>
    
      <!-- Bootstrap core JavaScript
        ================================================== -->
      <!-- Placed at the end of the document so the pages load faster -->
      <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
      <script>
        window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')
      </script>
      <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
      <script src="./assets/js/vendor/holder.min.js"></script>
      <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
      <script src="./assets/js/ie10-viewport-bug-workaround.js"></script>
      <script>
        $(function () {
          $(".side_visited").click(function () {
            $(this).children("ul").toggle();
            return false;
          })
    
          //侧栏选中样式
          $(".leftside_bar > li").click(function () {
            $(this).addClass("active").siblings().removeClass("active");
            
            //取消默认方法
            return false;
          })
        })
      </script>
      <script src="./assets/ueditor/ueditor.config.js"></script>
      <script src="./assets/ueditor/ueditor.all.min.js"></script>
      <script src="./assets/ueditor/lang/zh-cn/zh-cn.js"></script>
      
      <script>
            $(function () {
                var content = "";
                var caseId = 1;
                var ue = UE.getEditor('cont', {
                    serverUrl: '/ueditor/ue'
                });
        
            ue.ready(function () {
                ue.setContent(content);
                var isRequesting = false;
                $('#submit').on('click',function () {
                    if (isRequesting){
                        return;
                    }
                    var type = $('#classify').val().trim();
                    var title = $('#title').val().trim();
                    var keyword = $('#keyword').val().trim();
                    var ueContent = ue.getContent();
                    var sort = $('#sort').val() || 0;
                    isRequesting = true;
                    var url = '/api/case/create';
        
                    var data = {
                        type: type,
                        title: title,
                        keyword: keyword,
                        content: ueContent,
                        sort: sort
                    };
        
                    if (caseId){
                        data.id = caseId;
                        url = '/api/case/update';
                    }
        
                    $.post(url,data).then(function (res) {
                        var def = $.Deferred();
                        return res.code == 200 ? def.resolve(res) : def.reject(res.msg);
                    }).done(function (res) {
                        alert(res.msg);
                        if (!caseId){
                            location.href = '/admin/case?id ='+res.caseId;
                        }
                        location.href = '/admin/case_list';
                    }).fail(function (msg) {
                        alert(typeof msg === 'string'? msg :'服务器出现错误');
                    }).always(function () {
                        isRequesting = false;
                    });
                })
            });
        
            });
        </script>
    </body>
    
    </html>